<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <title>Model Animation Graphs JMA</title>


    <script src="../../../lib/jquery-3.2.1.slim.min.js"></script>
    <script src="../../../lib/bootstrap-4.0.0.min.js"></script>
    <script src="../../../lib/highlight-9.12.0.min.js"></script>
    <script src="../../../lib/bootbox-4.4.0.min.js"></script>

    <link rel="stylesheet" href="../../../lib/highlightjs-9.12.0.min.css">
    <link rel="stylesheet" href="../../../lib/bootstrap-4.0.0.min.css">
    <link rel="stylesheet" href="../../../lib/font-awesome-4.7.0.min.css">

    <link rel="stylesheet" href="../../../default.css">

    
    

</head>
    <body>

        <!-- Header Bar -->
        <header class="navbar navbar-light page-headbar">
            <button class="navbar-toggler page-togglesidebar" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="/">
                <!-- Project Name -->
                
            </a>
            <nav class="nav">
                <a class="nav-link" href="#" onclick="window.print();">Print</a>
                
            </nav>
        </header>

        <!-- Side Bar -->
        <aside class="page-sidebar">

            
            

            

            <ul class="tree-nav tree-root">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../home.html"><span>Home</span></a>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Blender Tutorial">
                    <label for="#nav-Blender Tutorial">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Blender Tutorial</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Blender Guides\Blender Instance Geometry Tutorial post 2.8.html"><span>Instance Geo 2.8</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Blender Guides\Blender Instance Geometry Tutorial pre 2.8.html"><span>Instance Geo 2.79</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Blender Guides\Blender Map Making Tutorial. post 2.8.html"><span>Map Making 2.8</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Blender Guides\Blender Map Making Tutorial. pre 2.8.html"><span>Map Making 2.79</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Blender Guides\Blender Environment\Blender Plugins.html"><span>Plugin Install</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-DAEConverter">
                    <label for="#nav-DAEConverter">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>DAEConverter</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../DAEConverter\Commands.html"><span>Commands</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-H2Codez Launcher">
                    <label for="#nav-H2Codez Launcher">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>H2Codez Launcher</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2CodezLauncher\H2Config.html"><span>Config</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2CodezLauncher\Launcher Features.html"><span>Features</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-H2Guerilla">
                    <label for="#nav-H2Guerilla">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>H2Guerilla</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Guerilla\Misc.html"><span>H2Guerilla Misc</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-H2Sapien">
                    <label for="#nav-H2Sapien">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>H2Sapien</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Sapien\Misc.html"><span>H2Sapien Misc</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox"  id="#nav-H2Tool">
                    <label for="#nav-H2Tool">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>H2Tool</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Extra_Commands.html"><span>Extra Commands</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\H2Tool_Links.html"><span>H2Tool Links</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Lightmapper.html"><span>Lightmapper</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Lightmapper_Setting_Specs.html"><span>Lightmapper Specs</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Misc.html"><span>H2Tool Misc</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Objects.html"><span>Object Tags</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Pathfinding.html"><span>Pathfinding</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Sounds.html"><span>Sounds</span></a>
                </li>
                

                
                <li>
                    <input type="checkbox"  id="#nav-Animations">
                    <label for="#nav-Animations">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Animations</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Animations\Animations.html"><span>Animation Graphs</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Animations\Animation_Importing_Guide.html"><span>Animation Importing</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Animations\JMA_File_Spec.html"><span>JMA File Spec</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Collision Model">
                    <label for="#nav-Collision Model">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Collision Model</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Collision_Model\3DS_Max_Collisions.html"><span>Collision 3DS Max</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Collision_Model\Blender_Collisions.html"><span>Collision Blender</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Physics Model">
                    <label for="#nav-Physics Model">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Physics Model</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Physics_Model\3DS_Max_Physics.html"><span>Physics 3DS Max</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Physics_Model\Blender_Physics.html"><span>Physics Blender</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Render Model">
                    <label for="#nav-Render Model">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Render Model</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Render_Model\BSP_Conversion.html"><span>BSP Conversion</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Render_Model\DAE_Conversion.html"><span>DAE Conversion</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../H2Tool\Render_Model\render_model.html"><span>Render Model</span></a>
                </li>
                </ul>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-HaloScript">
                    <label for="#nav-HaloScript">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>HaloScript</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Haloscript\intro.html"><span>Intro</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Haloscript\data_types.html"><span>Data Types</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Haloscript\type_casting.html"><span>Type Casting</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Install">
                    <label for="#nav-Install">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Install</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Install\DAEConverter.html"><span>DAEConverter</span></a>
                </li>
                

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Install\Installation.html"><span>H2Codez</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Misc Files">
                    <label for="#nav-Misc Files">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Misc Files</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Misc Files\Misc Files.html"><span>Misc Files</span></a>
                </li>
                </ul>
                </li>
                

                
                <li>
                    <input type="checkbox" checked id="#nav-Notes">
                    <label for="#nav-Notes">
                        <i class="tree-icon fa fa-fw fa-chevron-down"></i>
                        <span>Notes</span>
                    </label>
                    <ul class="tree-nav">

                
                <li class="tree-leaf">
                    
                        <i class="fa fa-circle-thin" aria-hidden="true"></i>
                    
                    <a href="../../Notes\Notes.html"><span>Notes</span></a>
                </li>
                </ul>
                </li>
                
            </ul>

            
            
        </aside>

        <!-- MAIN PAGE CONTENT -->
        <section class="page-main">
            <div class="page-content">
                

    
    <div class="page-header">
        <h1 class="display-4">Model Animation Graphs JMA </h1>
        <p class="lead">Making model_animation_graphs tags through JMA files.</p>
        <p>
            <span class="version">V</span>
            
            <img src="http://www.gravatar.com/avatar/585207db08475e9012646546d677fac4?s=100&amp;r=g&amp;d=retro" class="avatar" alt="General_101" title="General_101" />
            
            <small>last updated <span>5 months ago</span> on <span>2020/02/19</span></small>
        </p>

        
    </div>
    <br/>
    

    <div class="page-md">
        <p><a href="http://www.h2maps.net/Tools/PC/Export%20Scripts/Halo_Export.7z">Halo Export Scripts</a> -&gt; Export scripts for your 3D modeling software of choice.</p>
<p><a href="https://www.blender.org/">Blender Program</a> -&gt; The Blender modeling program itself.</p>
<p><a href="http://www.h2maps.net/Sources/H2EK%20Source/Manual/Animations/MasterChief_Animation_Example_Starting.blend">Spartan Model</a> -&gt; A rigged Master Chief model for posing.</p>
<p><a href="http://www.h2maps.net/Sources/H2EK%20Source/Manual/Animations/MasterChief_Animation_Example_Ending.blend">End Result</a> -&gt; The end result of this guide for you to compare.</p>
<p>Animations are one of the most important parts of any game. In this guide I will attempt to explain to you how to import animations as best as I can. Let me state that this guide will not cover how to work with 3DS Max software. 
If you want to use 3DS Max instead of Blender then look up animation importing guides for CE instead as it is basically the same thing.</p>
<p>We will start by setting up our working environment. Click on the Halo Export Scripts link above and extract the contents of the zip. If you navigate over to "Halo Export\Halo 2\Animation" and you will find a .py file named
Blend2Halo2-Animation. This file will be our exporter for Blender. Go to Blender and navigate to "Edit" on the top left and on the bottom of that dropdown menu click on "Preferences". A menu with tabs for various settings should
appear. Ensure you are on the "Add-ons" tab and look for a button labeled "Install" on the top right. Click this button and using the file browser menu, navigate on over to your Blend2Halo2-Animation.py file and select it to install.
Once installed find "Blend2Halo2 Animation" in the add-on list. You can make this quicker by changing the category from "All" to "Import-Export". Once checked you should notice that when you go to to "File" tab in the top left
and look for a button labeled "Export". Inside should be another option labeled Halo Animation (.jma). If you see this then you can continue on to the part you're actually here for.</p>
<p>Now go ahead and download the spartan model if you haven't already. It shall be your starting point for our animation. Our goal right now will be to make an animation for the spartan biped, add it to the model_animation_graph tag,
and play it ingame to see the results. You will notice when opening the file that it looks standard for Blender however it would help us if we changed the workspace to something more relevant. Navigate to the top and notice the
button labeled "animation" as shown in the following image. </p>
<p><img alt="" src="assets/AnimationImportingStep1.png" /></p>
<p>Click on it and your workspace should look something more like this now.</p>
<p><img alt="" src="assets/AnimationImportingStep2.png" /></p>
<p>Now that we have our workspace we can go over animations. For your understanding, animations are certain frames where specific location, rotation, and scale values are set. Those values are interpolated from frame to frame to 
present you with the idea of movement. With the armature selected and your object mode set to "Pose Mode" you can select a bone. Pressing the "T" key on your keyboard while having your cursor over the scene window will bring up
the tools window. With a bone selected in pose mode you can then go to the tools menu and select an action. Whether that be moving it on the xyz with the "Move" icon represented by the 4 arrows, rotating the bone with the rotate
tool represented by the circular shape made of two arrows going in opposite directions, or with the scale tool represented by the two boxes and arrow to represent a change in size. Another concept you will have to be familiar with 
is the dope sheet below as seen in the following picture.</p>
<p><img alt="" src="assets/AnimationImportingStep3.png" /></p>
<p>This is where you can see what objects have animation data at what frame. Their order from top to bottom being the object and the order left to right being the frame number. Making an animation means taking your objects, positing
them how you want them to look, and setting that for the current frame while moving on to the next.</p>
<p>So lets take set our starting position for the animation. Begin by going down to your frame start and end values to match how many frames you want your animation to go for. Lets do 1 for start and 12 for end as seen below.</p>
<p><img alt="" src="assets/AnimationImportingStep4.png" /></p>
<p>How long your timeline is will determine how many frames your animation will play for. Think about how you want your animation to look while choosing these values. You can always come back and change it later if you need more 
frames. Using the left or right arrow on your keyboard, go to your first frame in the timeline. In our case it will be frame one. Now select your Armature and set object mode to "Pose Mode" then hit the "A" key to select all bones. 
Press the "I" key to bring up the "Insert Keyframe" menu and from here go ahead and do location, rotation, and scale for frame 0. Move on to another frame and mess with the location, rotation, and scale of specific bones to achieve 
the movement you want. You can press "Spacebar" to play the current animation in your scene and see how it is coming together. After you have set a few keyframes you should have something that looks like the image below. </p>
<p><img alt="" src="assets/AnimationImportingStep5.png" /></p>
<p>If you need to change the position of a keyframe you can go down to the dope sheet and select it so that it goes from white to orange. You can the press the "G" key on your keyboard in order to move it to a different frame.
If you have gotten this far then you likely have an animation that is ready to export. All you need to do at this point is go to "File" and select "Export" and select "Halo Animation File (.jma)". From here an export menu will show 
up with a couple of options.</p>
<h6 id="extension">Extension</h6>
<p>This will let you change the extension of the file for importing animations for different uses. Refer to the extension description above for more info on this. </p>
<h6 id="version">Version</h6>
<p>This will change the file version of the exported JMA. 16390-16392 are the maximum for CE though only 16392 is functional for import in Tool.exe. Halo 2 Vista can take 16390-16395 and only 16392-16395 is functional for import in 
H2Tool.exe. 16395 is the last version made and has support for biped controller data from 3DS Max but the Blender exporter does not currently support this feature. You do not need to mess with this and can leave it at default 
which is 16392.</p>
<h6 id="game">Game</h6>
<p>Should be pretty self explanatory. Just choose the game you are exporting for from the dropdown menu. Controls how certain values are written and sets the proper file encoding.</p>
<h6 id="custom-framerate">Custom Framerate</h6>
<p>The framerate of the scene can be set by setting the framerate option to one of the preset values in the list. If the value is the CUSTOM value then it instead uses the value specified in the custom framerate option on the 
export menu.</p>
<h6 id="biped-controller">Biped Controller</h6>
<p>Purely for testing purposes. Please do not enable unless you are looking into this as well. JMS Version will have to be 16395 for this to actually do anything to the file.</p>
<p>Once you have saved the animation file you can take this to H2Tool to be imported. Created the standard folder structure like you would for a collisions or physics file but instead call this folder "animations". Place your 
animation file inside of that folder and use the H2CodezLauncher to import it.</p>
<p>Now comes the important part of this procedure. The command imports animations but it isn't complete. It doesn't actually create the tag for the animation or create the needed skeleton. You will have to create both of these.
Go to H2Guerilla and create a new model_animation_graph tag. In the private flags box check both "imported with codec compressors" and "animation data reordered". From there you begin to add as many nodes as your skeleton has.
You make this easier by exporting your skeleton for importing with a simple collision model and copying the skeleton from the collision over to the animation graph. Now for every node check the flag "primary model" and for the
root node check the flag "local root". You will also have to make the modes tag block by hand as well. Compare to existing animations to see how this should work. Once you have done the skeleton you should be ready to import 
animations for your model.</p>
    </div>


            </div>
        </section>
    </body>

    <script type="text/javascript">

    $(document).ready(function() {

        // Sidebar functionality.
        $('.page-togglesidebar').click(function(){
            $('body').toggleClass('page-sidebar-closed')
        });

        // Apply code highlighting.
        $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
        });

        // Apply CSS to all tables.
        $('.page-md table').addClass('table thead-light table-hover');

        // Set images to lightbox.
        $('.page-md img').on('click', function(event) {
            var imgsrc = $(this).attr('src');
            bootbox.alert({
                message: '<img src="'+imgsrc+'" style="width:100%; height:auto;"></img>',
                backdrop: true,
                closeButton: false,
                size: 'large'
            });
        });
    });
    </script>


    
<script type="text/javascript">

    $(document).ready(function() {

        // // Apply CSS specific to a table in a *parts* heading.
        // $('.page-md #parts + table')
        //     .addClass('parts')
        // //     .addClass('table thead-light table-hover')
        // //     //.css('position', 'absolute')
        //     //.css('width', '60%');
    });

</script>


</html>